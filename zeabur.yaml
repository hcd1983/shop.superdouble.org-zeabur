# Zeabur Configuration
name: superdouble-shop
runtime: php-apache

# PHP 版本配置
php:
  version: "7.3"
  extensions:
    - mysqli
    - pdo_mysql
    - gd
    - zip
    - mbstring
    - xml
    - curl
    - bcmath
    - exif
    - intl

# Apache 配置
apache:
  document_root: /
  rewrite: true

# 環境變數
environment:
  - WP_ENV=production
  - WP_DEBUG=false
  - WP_CACHE=true

# 建構配置
build:
  commands:
    # 確保 uploads 目錄存在
    - mkdir -p wp-content/uploads
    # 設置正確的權限
    - chmod -R 755 wp-content
    - chmod -R 777 wp-content/uploads
    - chmod 644 .htaccess
    # 複製 wp-config 檔案
    - if [ -f "wp-config-zeabur.php" ]; then cp wp-config-zeabur.php wp-config.php; fi

# 健康檢查
health_check:
  path: /
  interval: 30
  timeout: 10